C51 COMPILER V9.53.0.0   ADC                                                               05/29/2020 02:21:39 PAGE 1   


C51 COMPILER V9.53.0.0, COMPILATION OF MODULE ADC
OBJECT MODULE PLACED IN adc.OBJ
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE adc.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          #include <REG51F020.h>
   2          
   3          // Prototypes
   4          void delay(unsigned int);
   5          void init_timer2 (void) ;
   6          void initialize(void) ;
   7          void write_adc(void) ; 
   8          
   9          
  10          sfr adc = 0x80;
  11          sbit write = P3 ^ 0;
  12          // float data ;
  13          
  14          int main()
  15          {
  16   1        initialize();
  17   1        init_timer2();
  18   1        write = 0;
  19   1        
  20   1        EA = 1 ; 
  21   1        
  22   1        while(1)
  23   1          {
  24   2      //      delay(500);
  25   2      //      P2 = 0 ; 
  26   2      //      delay(500);
  27   2      //      P2 = 0xff; 
  28   2            
  29   2          }
  30   1        return 0;
  31   1      }
  32          
  33          
  34          /*Function to Provide delay*/
  35          void delay(unsigned int time)
  36          {
  37   1          unsigned int i;
  38   1          for(i=0; i<=time; i++);
  39   1      }
  40          
  41          void write_adc(void)
  42          {
  43   1        write = 0;
  44   1        write = 1;
  45   1      }
  46          
  47          void initialize(void)
  48          {
  49   1        EA = 0; // Disable global interrupts
  50   1        
  51   1        // make port 0 as input
  52   1        adc = 0xff;
  53   1        // make port 1 as output
  54   1        P1 = 0;
  55   1        // make port 2 as input
C51 COMPILER V9.53.0.0   ADC                                                               05/29/2020 02:21:39 PAGE 2   

  56   1        P1 = 0;
  57   1        // config port 3
  58   1        P3 = 0xfc;
  59   1        
  60   1        IT0 = 1; // Configure interrupt 0 for falling edge on /INT0 (P3.2)
  61   1        EX0 = 1; // Enable EX0 Interrupt
  62   1        
  63   1        IT1 = 1; // Configure interrupt 1 for falling edge on /INT1 (P3.3)
  64   1        EX1 = 1; // Enable EX1 Interrupt
  65   1      
  66   1        WDTCN = 0xde; // Disable watchdog timer
  67   1        WDTCN = 0xad;
  68   1      }
  69          
  70          void init_timer2 (void)
  71          {
  72   1        // uses system clock DIV BY 12
  73   1        CKCON = 0x00; // Define clock (T2M). Timer 2
  74   1        T2CON = 0x00;
  75   1        // Init reload values in the Capture registers
  76   1        RCAP2H = 0xFD;
  77   1        RCAP2L = 0x00;
  78   1        // count register set to reload immediately 
  79   1        TL2 = 0xff;
  80   1        TH2 = 0xff;
  81   1        // disable timer2 interrupt
  82   1        ET2 = 1;
  83   1        T2CON = 0x04; // Start Timer2 by setting TR2 (T2CON.2)
  84   1      }
  85          
  86          void ISR_timer2 (void) interrupt 5
  87          {
  88   1        TF2 = 0;
  89   1        write_adc();
  90   1        
  91   1        P1 = ~ adc ;
  92   1      //  data = adc; 
  93   1      //  P1 = ~ data ; 
  94   1      }
*** WARNING C294 IN LINE 30 OF adc.c: unreachable code


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    100    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
